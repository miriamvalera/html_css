<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<title>Juego Dados versión 2D</title>
	<link rel="stylesheet" type="text/css" href="dados5.css">
</head>
<body>
	<header>
		<h1>Tirada de dados</h1>
	</header>

    <div id="panel">
        <form>
            <label>Monedas iniciales: </label><span id="monedas">10</span>
            <br />
            <label>Apuesta por tirada: </label>
				<select>
					
				</select>
            <br />        
            <label>Mayor o Menor que 7: </label>
            <br />
            Mayor<input type="radio" name="mOm" value="mayor" class="mOm" checked />
            Menor<input type="radio" name="mOm" value="menor" class="mOm" />
            <br />
        </form>        
    </div>
    <div id="panel2">
        <h2>Estadísticas</h2>
                <div>Partidas jugadas: <span id="partidas">0</span></div>
                <div>Ganadas: <span id="ganadas">0</span></div>
                <div>Perdidas: <span id="perdidas">0</span></div>
                <div>Record monedas: <span id="record">0</span></div>   
    </div>
    <div id="dado2D">
        <img src="" name="dadoUno"/>
        <img src="" name="dadoDos"/>
        <br />
        <form>
        	<input id="boton" type="button" value="Lanza dados" onClick="lanzar()">
        </form>
        <br />
        <label>Resultado: </label><output id="solucion"></output>
         <h4 id="resultado"></h4>
        

    </div>

    <script>
		var partidas = 0;
		var ganadas = 0;
		var perdidas = 0;
		var record = 10;
		var monedas = parseInt(10);

		//Genero cuantas monedas tengo para apostar
		var monedasApuesta = document.getElementsByTagName('select')[0];

		for(let i=0;i<monedas;i++){
			monedasApuesta.appendChild(document.createElement('option'));
			monedasApuesta.children[i].value=i+1;
			monedasApuesta.children[i].innerHTML=i+1;
		}

		function lanzar(){
			//Sumamos 1 a partidas
			partidas++;

			//Generamos los dos números random de los dados
			var dado1 = Math.floor((Math.random()*6)+1);
			var dado2 = parseInt((Math.random()*6)+1);

			//Mostramos en pantalla la cara que toque de cada dado
			dado2D.children[0].src="cara"+dado1+".png";	
			dado2D.children[1].src="cara"+dado2+".png";

			//Relizamos la suma, para saber el número total
			var suma = dado1+dado2;
			solucion.innerHTML = suma;

			//Recogemos las variables del usuario
			var apuesta = parseInt(monedasApuesta.value);
			var mayor = document.getElementsByName('mOm')[0].checked;

			//Borrar las opciones del SELECT, ya que luego las volveremos a crear con las monedas que nos queden
			for(let i=0;i<monedas;i++){
				monedasApuesta.firstElementChild.remove();
			}

			// Pregunto que apuesta el usuario y decidimos si ha ganado o no
			if(suma==7){
				resultado.innerHTML = 'Ha salido 7, ni para ti, ni para mi';
			}else{
				if(mayor){
					if(suma>7){
						resultado.innerHTML ='HAS GANADO, te llevas mis monedas';
						monedas+=apuesta;
						ganadas++;
					}else{
						resultado.innerHTML ='HAS PERDIDO, me quedo tus monedas';
						monedas-=apuesta;
						perdidas++;
					}
				}else{
					if(suma<7){
						resultado.innerHTML ='HAS GANADO, te llevas mis monedas';
						monedas+=apuesta;
						ganadas++;
					}else{
						resultado.innerHTML ='HAS PERDIDO, me quedo tus monedas';
						monedas-=apuesta;
						perdidas++;
					}
				}
			}

			//Comprobamos si tenemos más monedas ahora, que el record absoluto, y en el caso que sea así, actualizamos el record
			if(monedas>record){
				record=monedas;
			}

			//Pregunto si me quedan monedas, y en el caso, que no, aviso al usuario y reseteo el juego
			if(monedas==0){
				alert('TE HAS QUEDADO SIN DINERO... ¿VOLVEMOS A JUGAR?');
				monedas=10;
				partidas=0;
				ganadas=0;
				perdidas=0;
			}

			//Vuelvo a generar las opciones del Select con la cantidad de monedas que me quedan
			for(let i=0;i<monedas;i++){
				monedasApuesta.appendChild(document.createElement('option'));
				monedasApuesta.children[i].value=i+1;
				monedasApuesta.children[i].innerHTML=i+1;
			}

			//Imprimo las estadísticas
			document.getElementById('monedas').innerHTML = monedas;
			document.getElementById('partidas').innerHTML = partidas;
			document.getElementById('ganadas').innerHTML = ganadas;
			document.getElementById('perdidas').innerHTML = perdidas;
			document.getElementById('record').innerHTML = record;
		}
	</script>

  </body>
</html>